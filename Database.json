{
    "name": "Contacts",
    "tables": [
        {
            "name": "Users",
            "columns": [
                {
                    "name": "KeycloakGuid",
                    "isUnique": true
                },
                {
                    "name": "Email",
                    "isNullable": true
                },
                {
                    "name": "IsEmailVerified",
                    "type": "boolean",
                    "isNullable": true
                },
                {
                    "name": "FirstName",
                    "isNullable": true
                },
                {
                    "name": "LastName",
                    "isNullable": true
                },
                {
                    "name": "ProfilePictureGuid",
                    "isNullable": true
                },
                {
                    "name": "LastSyncDate",
                    "isNullable": true
                }
            ]
        }
    ],
    "views": [
        {
            "name": "UserViews",
            "query": [
                "select",
                "    Id,",
                "    KeycloakGuid as [Guid],",
                "    Email,",
                "    IsEmailVerified,",
                "    FirstName,",
                "    LastName,",
                "    (",
                "        case",
                "        when FirstName is not null",
                "        or LastName is not null",
                "        then",
                "            isnull(FirstName, '') + ' ' + isnull(LastName, '')",
                "        when Email is not null",
                "        then Email",
                "        else",
                "            'N/A'",
                "        end",
                "    ) as DisplayValue,",
                "    LastSyncDate",
                "from Users"
            ]
        }
    ]
}